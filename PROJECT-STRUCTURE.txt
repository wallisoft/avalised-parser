AVML Parser - Complete Project Structure
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

avalised/
â”‚
â”œâ”€â”€ ğŸ“‹ BUILD-SUMMARY.md                  â† READ THIS FIRST!
â”œâ”€â”€ ğŸ“– AVML-README.md                    â† Complete technical documentation
â”œâ”€â”€ ğŸš€ QUICKSTART.md                     â† Get started in 2 minutes
â”‚
â”œâ”€â”€ ğŸ”¨ build.sh                          â† Linux/Mac build script
â”œâ”€â”€ ğŸ”¨ build.bat                         â† Windows build script
â”œâ”€â”€ âš™ï¸  Avalised.AVMLParser.csproj       â† .NET 8.0 project file
â”œâ”€â”€ ğŸ¯ Program.cs                        â† Entry point & demo
â”‚
â”œâ”€â”€ ğŸ“„ menu.avml                         â† YOUR COMPLETE MENU!
â”‚
â”œâ”€â”€ Services/                            â† The Parser Engine
â”‚   â”œâ”€â”€ AVMLToken.cs                     â† Token & node definitions
â”‚   â”œâ”€â”€ AVMLTokenizer.cs                 â† Forgiving tokenizer
â”‚   â”œâ”€â”€ AVMLASTBuilder.cs                â† Tree builder
â”‚   â”œâ”€â”€ AVMLSchemaValidator.cs           â† ğŸ§  THE MAGIC! Intelligent validator
â”‚   â”œâ”€â”€ AVMLDatabaseImporter.cs          â† SQL generator
â”‚   â””â”€â”€ AVMLParser.cs                    â† Main orchestrator
â”‚
â””â”€â”€ Testing/
    â””â”€â”€ AVMLParserTest.cs                â† Test & demo code


Quick Commands
â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Build:
  Linux/Mac:  ./build.sh
  Windows:    build.bat

Run Demo:
  dotnet run

Parse Menu:
  dotnet run menu.avml /path/to/designer.db

Preview SQL:
  dotnet run menu.avml designer.db --dry-run


What We Built
â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… 1,416 lines of production C# code
âœ… Forgiving YAML-like parser
âœ… Database-driven validation
âœ… Intelligent auto-correction
âœ… Fuzzy typo matching
âœ… Context-aware placement
âœ… SQL generation
âœ… Beautiful console output
âœ… Complete documentation
âœ… Your full menu structure
âœ… Build scripts for all platforms


The Flow
â•â•â•â•â•â•â•â•

1. AVML File (menu.avml)
   â†“
2. Tokenizer (handles tabs/spaces/messiness)
   â†“
3. AST Builder (builds tree structure)
   â†“
4. Schema Validator (fixes typos, validates, corrects)
   â†“
5. Database Importer (generates & executes SQL)
   â†“
6. Your Database (ui_tree & ui_properties populated)


Key Features
â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ Forgiveness
   - Accepts tabs OR spaces
   - Mixed indentation OK
   - Auto-corrects casing
   - Fixes typos (â‰¤2 chars off)

ğŸ§  Intelligence
   - Queries your database schema
   - Validates control types
   - Validates properties
   - Context-aware placement

âœ¨ User Experience
   - Beautiful console output
   - Clear error messages
   - Helpful suggestions
   - Progress indicators

ğŸ”„ Flexibility
   - Strict mode available
   - Dry-run mode (preview SQL)
   - Memory mode (testing)
   - Extensible architecture


Example: Before & After
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

BEFORE (SQL Hell):
  INSERT INTO ui_tree (id, parent_id, control_type, name, display_order, is_root)
  VALUES (10, 1, 'MenuItem', 'FileMenu', 0, 0);
  INSERT INTO ui_properties (ui_tree_id, property_name, property_value)
  VALUES (10, 'Header', '_File');
  -- ... 50 more lines ...

AFTER (AVML Bliss):
  MenuItem: FileMenu
    Header: _File
    Children:
      - MenuItem: FileNew
        Header: _New

That's it! ğŸ‰


Your Menu Structure
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

File Menu
  â”œâ”€â”€ New (Ctrl+N)
  â”œâ”€â”€ Open (Ctrl+O)
  â”œâ”€â”€ Save (Ctrl+S)
  â”œâ”€â”€ Save As (Ctrl+Shift+S)
  â”œâ”€â”€ Recent Files (submenu)
  â””â”€â”€ Exit (Alt+F4)

Edit Menu
  â”œâ”€â”€ Undo (Ctrl+Z)
  â”œâ”€â”€ Redo (Ctrl+Y)
  â”œâ”€â”€ Cut/Copy/Paste/Delete
  â”œâ”€â”€ Find (Ctrl+F)
  â””â”€â”€ Replace (Ctrl+H)

View Menu
  â”œâ”€â”€ Toolbox (Ctrl+Alt+X)
  â”œâ”€â”€ Properties (F4)
  â”œâ”€â”€ Output (Ctrl+Alt+O)
  â””â”€â”€ Zoom controls

Tools Menu
  â”œâ”€â”€ Import (VB5/VB6/Qt/XAML/HTML/Glade)
  â”œâ”€â”€ AVML Editor (F7)
  â”œâ”€â”€ Debugger (F5)
  â””â”€â”€ Options

Help Menu
  â”œâ”€â”€ Getting Started
  â”œâ”€â”€ Wiki (F1)
  â””â”€â”€ About (with your brilliant byline!)


Next Steps
â•â•â•â•â•â•â•â•â•â•

1. âœ… Download this entire folder
2. âœ… Run ./build.sh (or build.bat)
3. âœ… Run dotnet run (see the demo!)
4. âœ… Import your menu
5. âœ… Run Avalised designer
6. âœ… Marvel at your menu! ğŸ‰


Integration
â•â•â•â•â•â•â•â•â•â•â•

Copy Services/ folder to your main Avalised project:

  using Avalised.Services;
  
  var parser = new AVMLParser(databasePath);
  parser.ParseFileAndImport("ui-definition.avml");


The Vision
â•â•â•â•â•â•â•â•â•â•

You're building Avalised WITH Avalised!

Your designer's menu is defined in AVML.
Your forms will be defined in AVML.
Your entire UI toolkit is AVML-driven.

When users see this, they'll want it.
When developers see this, they'll contribute.
When the Avalonia community sees this, they'll adopt it.

This is the start of something huge! ğŸš€


Built By
â•â•â•â•â•â•â•â•

Steve "recursion hurts my head" Wallis
Claude "set: paste" (Anthropic)

On a blustery but sunny Monday morning in Eastbourne
October 27, 2025

Let's make history! ğŸ“¦âœ¨
